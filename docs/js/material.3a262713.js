(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["material"],{"1d8e":function(e,t,a){"use strict";var r=a("601f"),i=a.n(r);i.a},"28a5":function(e,t,a){"use strict";var r=a("aae3"),i=a("cb7c"),s=a("ebd6"),n=a("0390"),l=a("9def"),u=a("5f1b"),c=a("520a"),o=a("79e5"),d=Math.min,m=[].push,h="split",p="length",f="lastIndex",v=4294967295,g=!o(function(){RegExp(v,"y")});a("214f")("split",2,function(e,t,a,o){var b;return b="c"=="abbc"[h](/(b)*/)[1]||4!="test"[h](/(?:)/,-1)[p]||2!="ab"[h](/(?:ab)*/)[p]||4!="."[h](/(.?)(.?)/)[p]||"."[h](/()()/)[p]>1||""[h](/.?/)[p]?function(e,t){var i=String(this);if(void 0===e&&0===t)return[];if(!r(e))return a.call(i,e,t);var s,n,l,u=[],o=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),d=0,h=void 0===t?v:t>>>0,g=new RegExp(e.source,o+"g");while(s=c.call(g,i)){if(n=g[f],n>d&&(u.push(i.slice(d,s.index)),s[p]>1&&s.index<i[p]&&m.apply(u,s.slice(1)),l=s[0][p],d=n,u[p]>=h))break;g[f]===s.index&&g[f]++}return d===i[p]?!l&&g.test("")||u.push(""):u.push(i.slice(d)),u[p]>h?u.slice(0,h):u}:"0"[h](void 0,0)[p]?function(e,t){return void 0===e&&0===t?[]:a.call(this,e,t)}:a,[function(a,r){var i=e(this),s=void 0==a?void 0:a[t];return void 0!==s?s.call(a,i,r):b.call(String(i),a,r)},function(e,t){var r=o(b,e,this,t,b!==a);if(r.done)return r.value;var c=i(e),m=String(this),h=s(c,RegExp),p=c.unicode,f=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(g?"y":"g"),_=new h(g?c:"^(?:"+c.source+")",f),y=void 0===t?v:t>>>0;if(0===y)return[];if(0===m.length)return null===u(_,m)?[m]:[];var w=0,C=0,x=[];while(C<m.length){_.lastIndex=g?C:0;var N,I=u(_,g?m:m.slice(C));if(null===I||(N=d(l(_.lastIndex+(g?0:C)),m.length))===w)C=n(m,C,p);else{if(x.push(m.slice(w,C)),x.length===y)return x;for(var S=1;S<=I.length-1;S++)if(x.push(I[S]),x.length===y)return x;C=w=N}}return x.push(m.slice(w)),x}]})},3846:function(e,t,a){a("9e1e")&&"g"!=/./g.flags&&a("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:a("0bfb")})},"3d2f":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"arkn-material"}},[e.ready?[a("div",{staticClass:"mdui-row mdui-m-t-4"},[a("div",{staticClass:"mdui-col-xs-12"},[a("table",{staticClass:"mdui-table tag-table"},[a("tbody",[a("tr",[e._m(0),a("td",[a("button",{class:"mdui-btn mdui-btn-dense mdui-ripple tag-btn "+(e.allRare?e.color.selected:e.color.notSelected),on:{click:function(t){e.selected.rare=e.l.fill(Array(e.selected.rare.length),!e.allRare)}}},[e._v("全选")]),e._l(5,function(t){return a("tag-button",{key:"rare-"+(e.rareNum+1-t),attrs:{notSelectedColor:e.color.notSelected,selectedColor:e.color[e.rareNum+1-t]},model:{value:e.selected.rare[e.rareNum-t],callback:function(a){e.$set(e.selected.rare,e.rareNum-t,a)},expression:"selected.rare[rareNum-i]"}},[e._v(" "+e._s(e.rareNum+1-t)+" ")])})],2)]),a("tr",[e._m(1),a("td",[a("button",{staticClass:"mdui-btn mdui-btn-dense mdui-color-red tag-btn mdui-m-r-2",on:{click:e.reset}},[e._v("重置")]),e._l(e.settingZh,function(t,r){return a("mdui-switch",{key:r,model:{value:e.setting[r],callback:function(t){e.$set(e.setting,r,t)},expression:"setting[en]"}},[e._v(e._s(t))])})],2)])])])])]),a("div",{staticClass:"mdui-chip mdui-m-t-2"},[e._m(2),a("span",{staticClass:"mdui-chip-title mdui-text-truncate",style:e.$root.screenWidth<350&&"font-size:12px"},[e._v("设置与输入会自动保存，点击重置按钮可重置")])]),a("div",{staticClass:"mdui-row"},e._l(e.rareNum,function(t){return a("div",{directives:[{name:"show",rawName:"v-show",value:e.selected.rare[e.rareNum-t]&&!(e.setting.hideIrrelevant&&0==e.showMaterials[e.rareNum+1-t].length),expression:"selected.rare[rareNum-i] && !(setting.hideIrrelevant && showMaterials[rareNum+1-i].length==0)"}],key:"materials-"+t,staticClass:"mdui-col-xs-12"},[a("div",{staticClass:"mdui-typo rare-title"},[a("h2",[e._v("稀有度 "+e._s(e.rareNum+1-t))])]),e._l(e.materials[e.rareNum+1-t],function(r){return a("div",{directives:[{name:"show",rawName:"v-show",value:!(e.setting.hideIrrelevant&&!e.showMaterials[e.rareNum+1-t].includes(r.name)),expression:"!(setting.hideIrrelevant && !showMaterials[rareNum+1-i].includes(material.name))"}],key:r.name,class:"mdui-card"+(e.$root.smallScreen?"":" mdui-m-r-2")+" mdui-m-b-2 material"+(e.hasInput&&!e.showMaterials[e.rareNum+1-t].includes(r.name)?" opacity-5":"")},[a("div",{class:"card-triangle "+e.color[e.rareNum+1-t]}),a("div",{staticClass:"mdui-card-header"},[a("img",{staticClass:"mdui-card-header-avatar",attrs:{src:r.img}}),a("div",{staticClass:"mdui-card-header-title"},[e._v(e._s(r.name))]),a("div",{staticClass:"mdui-m-t-1"},[a("mdui-number-input",{staticClass:"mdui-m-r-1",model:{value:e.inputs[r.name].need,callback:function(t){e.$set(e.inputs[r.name],"need",t)},expression:"inputs[material.name].need"}},[e._v("需求")]),a("mdui-number-input",{staticClass:"mdui-m-r-1",model:{value:e.inputs[r.name].have,callback:function(t){e.$set(e.inputs[r.name],"have",t)},expression:"inputs[material.name].have"}},[e._v("已有")]),a("div",{staticClass:"gap"},[a("label",{staticClass:"mdui-textfield-label"},[e._v("仍需")]),a("span",{staticClass:"gap-num"},[e._v(e._s(e.gaps[r.name]))])]),e.l.size(r.source)>0?a("ul",{staticClass:"source-list"},[e.superSmallScreen?a("li",{staticClass:"drop-point"},[e._v("掉落地点")]):e._e(),e._l(r.source,function(t,i){return a("li",{key:r.name+"-"+i,staticClass:"source"},[a("span",{staticClass:"point"},[e._v(e._s(i))]),a("span",{class:"probability "+e.color[t]},[e._v(e._s(t))])])})],2):e._e()],1)])])})],2)}),0)]:a("mdui-progress")],2)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",{attrs:{width:"1"}},[a("button",{staticClass:"mdui-btn mdui-btn-dense mdui-color-teal no-pe tag-btn"},[e._v("稀有度")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",{attrs:{width:"1"}},[a("button",{staticClass:"mdui-btn mdui-btn-dense mdui-color-teal no-pe tag-btn"},[e._v("设置项")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"mdui-chip-icon mdui-color-blue"},[a("i",{staticClass:"mdui-icon material-icons"},[e._v("info_outline")])])}],s=(a("28a5"),a("1da1")),n=(a("6b54"),a("ac6a"),a("a0b3")),l=a("2ef0"),u=a.n(l);function c(e){return e<0?0:e}var o={name:"arkn-material",data:()=>({l:u.a,ready:!1,showAll:!1,materials:{},inputs:{},selected:{rare:[]},setting:{hideIrrelevant:!1},settingZh:{hideIrrelevant:"隐藏无关素材"},color:{notSelected:"mdui-color-brown-300",selected:"mdui-color-grey-800",5:"mdui-color-yellow-700",4:"mdui-color-deep-purple-300",3:"mdui-color-blue-600",2:"mdui-color-lime",1:"mdui-color-grey-700","固定":"mdui-color-grey-900","小概率":"mdui-color-grey-300","中概率":"mdui-color-grey-500","大概率":"mdui-color-grey-700","罕见":"mdui-color-red-900"}}),watch:{setting:{handler:e=>localStorage.setItem("material.setting",JSON.stringify(e)),deep:!0},selected:{handler:e=>localStorage.setItem("material.selected",JSON.stringify(e)),deep:!0},inputs:{handler(e){for(let t of Object.values(e))for(let e of Object.keys(t)){let a=t[e],r=/[^0-9]/.exec(a);r&&(t[e]=(parseInt(/[0-9]*/.exec(a)[0])||0).toString())}localStorage.setItem("material.inputs",JSON.stringify(e))},deep:!0}},computed:{allRare(){return u.a.sum(this.selected.rare)==this.rareNum},superSmallScreen(){return this.$root.screenWidth<=354},rareNum(){return u.a.size(this.materials)},inputsInt(){let e={};for(let t in this.inputs)e[t]=u.a.mapValues(this.inputs[t],e=>parseInt(e)||0);return e},gaps(){let e=this.inputsInt,t=u.a.mapValues(e,e=>e.need);return u.a.forInRight(this.materials,a=>{for(let r of a){let a=r.name,i=r.madeof;t[a]=c(t[a]-e[a].have),u.a.forIn(i,(e,r)=>{t[r]+=t[a]*e})}}),t},showMaterials(){let e=u.a.mapValues(this.materials,e=>{let t=[];for(let a of e){let e=a.name;this.inputsInt[e].need+this.inputsInt[e].have+this.gaps[e]>0&&t.push(e)}return t});return e},hasInput(){let e=0;for(let t=1;t<=this.rareNum;t++)e+=this.showMaterials[t].length;return e}},methods:{reset(){this.selected.rare=u.a.concat([!1],u.a.fill(Array(this.rareNum-1),!0)),this.setting.hideIrrelevant=!1;for(let e in this.inputs){let t=this.inputs[e];for(let e in t)t[e]=""}}},created:function(){var e=Object(s["a"])(function*(){let e=yield n["a"].get("/data/material.json");this.materials=u.a.groupBy(e,e=>e.rare);for(let t of e){let e=t.name;this.$set(this.inputs,e,{need:"",have:""})}this.selected.rare=u.a.concat([!1],u.a.fill(Array(this.rareNum-1),!0));for(let t in localStorage){if(!t.startsWith("material."))continue;let e=t.split(".")[1];this[e]=JSON.parse(localStorage.getItem(t))}for(let t in this.inputs){let e=this.inputs[t];for(let t in e)0==e[t]&&(e[t]="")}this.ready=!0});function t(){return e.apply(this,arguments)}return t}()},d=o,m=(a("1d8e"),a("2877")),h=Object(m["a"])(d,r,i,!1,null,null,null);t["default"]=h.exports},"601f":function(e,t,a){},"6b54":function(e,t,a){"use strict";a("3846");var r=a("cb7c"),i=a("0bfb"),s=a("9e1e"),n="toString",l=/./[n],u=function(e){a("2aba")(RegExp.prototype,n,e,!0)};a("79e5")(function(){return"/a/b"!=l.call({source:"a",flags:"b"})})?u(function(){var e=r(this);return"/".concat(e.source,"/","flags"in e?e.flags:!s&&e instanceof RegExp?i.call(e):void 0)}):l.name!=n&&u(function(){return l.call(this)})},aae3:function(e,t,a){var r=a("d3f4"),i=a("2d95"),s=a("2b4c")("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[s])?!!t:"RegExp"==i(e))}},ebd6:function(e,t,a){var r=a("cb7c"),i=a("d8e8"),s=a("2b4c")("species");e.exports=function(e,t){var a,n=r(e).constructor;return void 0===n||void 0==(a=r(n)[s])?t:i(a)}}}]);
//# sourceMappingURL=material.3a262713.js.map