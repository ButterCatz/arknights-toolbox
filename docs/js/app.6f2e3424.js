(function(t){function e(e){for(var i,l,r=e[0],o=e[1],c=e[2],d=0,m=[];d<r.length;d++)l=r[d],a[l]&&m.push(a[l][0]),a[l]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i]);u&&u(e);while(m.length)m.shift()();return n.push.apply(n,c||[]),s()}function s(){for(var t,e=0;e<n.length;e++){for(var s=n[e],i=!0,r=1;r<s.length;r++){var o=s[r];0!==a[o]&&(i=!1)}i&&(n.splice(e--,1),t=l(l.s=s[0]))}return t}var i={},a={app:0},n=[];function l(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,l),s.l=!0,s.exports}l.m=t,l.c=i,l.d=function(t,e,s){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(l.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)l.d(s,i,function(e){return t[e]}.bind(null,i));return s},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],o=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=o;n.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"034f":function(t,e,s){"use strict";var i=s("64a9"),a=s.n(i);a.a},"0e7c":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"progress"},[s("div",{staticClass:"mdui-typo-headline"},[t._v("数据准备中")]),s("div",{staticClass:"mdui-spinner mdui-spinner-colorful mdui-m-l-1"})])}],n={name:"mdui-progress"},l=n,r=(s("5def"),s("2877")),o=Object(r["a"])(l,i,a,!1,null,"c0bf99bc",null);e["default"]=o.exports},"17a1":function(t){t.exports={d:[[30],[30],[40,55],[45,60,70],[50,70,80],[50,80,90]],a:[[100,117,134,151,168,185,202,219,236,253,270,287,304,321,338,355,372,389,406,423,440,457,474,491,508,525,542,559,574,589,605,621,637,653,669,685,701,716,724,739,749,759,770,783,804,820,836,852,888],[120,172,224,276,328,380,432,484,536,588,640,692,744,796,848,900,952,1004,1056,1108,1160,1212,1264,1316,1368,1420,1472,1524,1576,1628,1706,1784,1862,1940,2018,2096,2174,2252,2330,2408,2584,2760,2936,3112,3288,3464,3640,3816,3992,4168,4344,4520,4696,4890,5326,6019,6312,6505,6838,7391,7657,7823,8089,8355,8621,8887,9153,9419,9605,9951,10448,10945,11442,11939,12436,12933,13430,13927,14549],[191,303,415,527,639,751,863,975,1087,1199,1311,1423,1535,1647,1759,1871,1983,2095,2207,2319,2431,2543,2655,2767,2879,2991,3103,3215,3327,3439,3602,3765,3928,4091,4254,4417,4580,4743,4906,5069,5232,5395,5558,5721,5884,6047,6210,6373,6536,6699,6902,7105,7308,7511,7714,7917,8120,8323,8526,8729,9163,9597,10031,10465,10899,11333,11767,12201,12729,13069,13747,14425,15103,15781,16459,17137,17815,18493,19171,19849,21105,22361,23617,24873,26129,27385,28641,29897,31143]],b:[[30,36,43,50,57,65,73,81,90,99,108,118,128,138,149,160,182,206,231,258,286,315,346,378,411,446,482,520,557,595,635,677,720,764,809,856,904,952,992,1042,1086,1131,1178,1229,1294,1353,1413,1474,1572],[48,71,95,120,146,173,201,231,262,293,326,361,396,432,470,508,548,589,631,675,719,765,811,859,908,958,1010,1062,1116,1171,1245,1322,1400,1480,1562,1645,1731,1817,1906,1996,2171,2349,2531,2717,2907,3100,3298,3499,3705,3914,4127,4344,4565,4807,5294,6049,6413,6681,7098,7753,8116,8378,8752,9132,9518,9909,10306,10709,11027,11533,12224,12926,13639,14363,15097,15843,16599,17367,18303],[76,124,173,225,279,334,392,451,513,577,642,710,780,851,925,1001,1079,1159,1240,1324,1410,1498,1588,1680,1773,1869,1967,2067,2169,2273,2413,2556,2702,2851,3003,3158,3316,3477,3640,3807,3976,4149,4324,4502,4684,4868,5055,5245,5438,5634,5867,6103,6343,6587,6835,7086,7340,7599,7861,8127,8613,9108,9610,10120,10637,11163,11696,12238,12882,13343,14159,14988,15828,16681,17545,18422,19311,20213,21126,22092,23722,25380,27065,28778,30519,32287,34083,35906,37745]],c:[[],[],[1e4],[15e3,6e4],[2e4,12e4],[3e4,18e4]]}},"1d8e":function(t,e,s){"use strict";var i=s("601f"),a=s.n(i);a.a},2992:function(t,e,s){"use strict";var i=s("3d74"),a=s.n(i);a.a},"2fea":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mdui-textfield mdui-p-y-0"},[s("label",{staticClass:"mdui-textfield-label"},[t._t("default")],2),s("input",{staticClass:"mdui-textfield-input mdui-p-y-0",attrs:{type:"number",min:"0",step:"1"},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}})])},a=[],n={name:"mdui-number-input",model:{prop:"value",event:"input"},props:{value:[Number,String]}},l=n,r=(s("d12e"),s("2877")),o=Object(r["a"])(l,i,a,!1,null,"3a4704c1",null);e["default"]=o.exports},"3b81":function(t,e,s){},"3d74":function(t,e,s){},"46aa":function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);s("a481"),s("ac6a");var i=s("2b0e"),a=s("2a31"),n=s.n(a),l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"mdui-p-b-5",attrs:{id:"app"}},[i("div",{staticClass:"mdui-appbar mdui-color-grey-900"},[i("div",{staticClass:"mdui-tab mdui-color-theme",attrs:{"mdui-tab":""}},[i("router-link",{staticClass:"mdui-ripple mdui-ripple-white router-root",attrs:{to:"/"}},[i("span",{staticClass:"mdui-hidden-xs"},[t._v("明日方舟工具箱")]),i("i",{staticClass:"mdui-hidden-sm-up mdui-icon material-icons"},[t._v("home")])]),i("router-link",{staticClass:"mdui-ripple mdui-ripple-white",attrs:{to:"/hr"}},[i("span",[t._v("公开招募"),i("span",{staticClass:"mdui-hidden-xs"},[t._v("计算")])])]),i("router-link",{staticClass:"mdui-ripple mdui-ripple-white",attrs:{to:"/material"}},[i("span",[t._v("精英材料"),i("span",{staticClass:"mdui-hidden-xs"},[t._v("计算")])])]),i("router-link",{staticClass:"mdui-ripple mdui-ripple-white",attrs:{to:"/level"}},[i("span",[t._v("干员升级"),i("span",{staticClass:"mdui-hidden-xs"},[t._v("计算")])])])],1)]),i("div",{class:"mdui-container"+(t.$root.smallScreen?" mobile-screen":"")},[i("transition",{attrs:{name:"fade",mode:"out-in"},on:{leave:function(e){t.$root.nm=!1},enter:t.$root.mutation}},[i("router-view")],1)],1),t.$root.nm?i("img",{staticClass:"bg-img",attrs:{src:s("6138")}}):i("img",{staticClass:"bg-img",attrs:{src:s("bd6f")}})])},r=[],o={name:"app"},c=o,u=(s("034f"),s("2877")),d=Object(u["a"])(c,l,r,!1,null,null,null),m=d.exports,p=s("8c4f"),h=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mdui-row mdui-typo mdui-center",staticStyle:{"max-width":"1012px"}},[s("div",{staticClass:"mdui-col-xs-12"},[s("h1",[t._v("明日方舟工具箱")]),t._m(0),s("p",[t._v("开发中……宗旨是简洁美观且对移动设备友好")]),s("p",[t._v("本应用使用 Service Worker 缓存加载过的图片以及应用本身，因此甚至可以离线使用")]),t._m(1),s("h2",[t._v("主要计划功能")]),t._m(2),s("h2",[t._v("数据来源")]),t._m(3),s("h2",[t._v("其他")]),s("p",[s("button",{staticClass:"mdui-btn mdui-btn-raised mdui-ripple mdui-color-pink-accent mdui-m-r-2",on:{click:t.clear}},[t._v("清除本地数据")]),t._v("已用："+t._s(t.lsSize)+"\n\t\t")])])])},g=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("Github: "),s("a",{attrs:{href:"https://github.com/Tsuk1ko/arknights-toolbox",target:"_blank"}},[t._v("Tsuk1ko/arknights-toolbox")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v("如果有好的想法、建议、希望增加的功能，以及 BUG，欢迎到项目中提 "),s("a",{attrs:{href:"https://github.com/Tsuk1ko/arknights-toolbox/issues",target:"_blank"}},[t._v("issue")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ol",[s("li",[t._v("公开招募计算【已完成】")]),s("li",[t._v("精英材料计算【已完成】")]),s("li",[t._v("干员升级计算【已完成】")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[s("a",{attrs:{href:"http://wiki.joyme.com/arknights",target:"_blank"}},[t._v("明日方舟 Wiki")]),t._v("（干员数据及图片）")]),s("li",[s("a",{attrs:{href:"https://github.com/graueneko/graueneko.github.io",target:"_blank"}},[t._v("graueneko.github.io")]),t._v("（材料合成、干员升级数据）")]),s("li",[s("a",{attrs:{href:"https://github.com/Houdou/arkgraph",target:"_blank"}},[t._v("ark-nights.com")]),t._v("（材料图片）")])])}],v=s("2ef0"),b=s.n(v),f=s("8fc5"),_={name:"home",data(){return{lsSize:this.calcLsSize()}},methods:{clear(){localStorage.clear(),this.$root.snackbar("清除成功"),this.lsSize=this.calcLsSize()},calcLsSize(){return this.$root.calcSize(b.a.sumBy(Object.values(localStorage),f["a"]))}}},k=_,C=Object(u["a"])(k,h,g,!1,null,null,null),y=C.exports,x=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"arkn-hr"}},[t.ready?[s("div",{staticClass:"mdui-row"},[s("div",{staticClass:"mdui-col-xs-12"},[s("div",{class:t.$root.smallScreen?"mdui-drawer mdui-drawer-right mdui-drawer-close":"mdui-m-t-4",attrs:{id:"drawer"}},[s("table",{staticClass:"mdui-table tag-table"},[s("tbody",[s("tr",[t.$root.smallScreen?t._e():s("td",{attrs:{width:"1"}},[s("button",{staticClass:"mdui-btn mdui-btn-dense mdui-color-teal no-pe tag-btn"},[t._v("星级")])]),s("td",{attrs:{colspan:!!t.$root.smallScreen&&2}},[t.$root.smallScreen?s("label",{staticClass:"mdui-textfield-label"},[t._v("星级")]):t._e(),s("button",{class:"mdui-btn mdui-btn-dense mdui-ripple tag-btn "+(t.allStar?t.color.selected:t.color.notSelected),on:{click:function(e){t.selected.star=t.l.fill(Array(t.selected.star.length),!t.allStar)}}},[t._v("全选")]),t._l(6,function(e){return s("tag-button",{key:"star-"+(7-e),attrs:{notSelectedColor:t.color.notSelected,selectedColor:t.color[7-e]},model:{value:t.selected.star[6-e],callback:function(s){t.$set(t.selected.star,6-e,s)},expression:"selected.star[6-i]"}},[t._v(t._s(7-e)+"★")])})],2)]),t._l(t.tagList.sort,function(e){return s("tr",{key:e.en},[t.$root.smallScreen?t._e():s("td",[s("button",{staticClass:"mdui-btn mdui-btn-dense mdui-color-teal no-pe tag-btn"},[t._v(t._s(e.zh))])]),s("td",{attrs:{colspan:!!t.$root.smallScreen&&2}},[t.$root.smallScreen?s("label",{staticClass:"mdui-textfield-label"},[t._v(t._s(e.zh))]):t._e(),t._l(t.tagList[e.en],function(e){return s("tag-button",{key:e,attrs:{notSelectedColor:t.color.notSelected,selectedColor:t.color.selected},on:{"!click":function(e){return t.test(e)}},model:{value:t.selected.tag[e],callback:function(s){t.$set(t.selected.tag,e,s)},expression:"selected.tag[tag]"}},[t._v(t._s(e))])})],2)])}),s("tr",[t.$root.smallScreen?t._e():s("td",{attrs:{width:"1"}},[s("label",{staticClass:"mdui-textfield-label",staticStyle:{opacity:"0"}},[t._v("_")]),s("button",{staticClass:"mdui-btn mdui-btn-dense mdui-color-red tag-btn",on:{click:t.reset}},[t._v("重置")])]),s("td",{attrs:{colspan:!!t.$root.smallScreen&&2}},[s("label",{staticClass:"mdui-textfield-label"},[t._v("设置项（这些设置会被永久保存）")]),t._l(t.settingZh,function(e,i){return s("mdui-switch",{key:i,model:{value:t.setting[i],callback:function(e){t.$set(t.setting,i,e)},expression:"setting[en]"}},[t._v(t._s(e))])})],2)]),t.$root.smallScreen?s("tr",[s("td",{attrs:{colspan:"2"}},[s("button",{staticClass:"mdui-btn mdui-ripple mdui-btn-dense mdui-color-red tag-btn",on:{click:t.reset}},[t._v("重置")])])]):t._e()],2)])])])]),t.selected.tag["高级资深干员"]?s("div",{staticClass:"mdui-chip mdui-m-t-4"},[t._m(0),s("span",{staticClass:"mdui-chip-title mdui-text-truncate",style:t.$root.screenWidth<360&&"font-size:12px"},[t._v("请拉满 9 个小时以保证“高级资深干员”不被划掉")])]):t._e(),s("div",{staticClass:"mdui-row mdui-m-t-4"},[s("div",{staticClass:"mdui-col-xs-12"},[t.$root.smallScreen?s("div",{staticClass:"comb-small"},[s("table",{staticClass:"mdui-table comb-table mdui-shadow-0 no-border"},[t._m(2),s("tbody",[t._l(t.combinations,function(e,i){return[s("tr",{key:"comb-"+i+"-tr1"},[s("td",{staticClass:"mdui-p-b-0 no-border",attrs:{colspan:"2"}},t._l(e.tags,function(e){return s("button",{key:"comb-"+i+"-"+e,class:"mdui-btn mdui-btn-dense no-pe tag-btn "+t.color.selected},[t._v(t._s(e))])}),0)]),s("tr",{key:"comb-"+i+"-tr2"},[s("td",{attrs:{colspan:"2"}},t._l(e.chars,function(e){return s("button",{key:"comb-"+i+"-"+e,class:"mdui-btn mdui-btn-dense tag-btn "+t.color[t.hr[e].star],attrs:{"has-avatar":t.setting.showAvatar},on:{click:function(s){return t.showDetail(e)}}},[t.setting.showAvatar?s("img",{staticClass:"tag-avatar no-pe",attrs:{src:t.$root.qhimg(t.addition[t.hr[e].name].img)}}):t._e(),t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(t.hr[e].name)+"\n\t\t\t\t\t\t\t\t\t\t")])}),0)])]}),0==t.combinations.length?s("tr",[s("td",{staticClass:"no-border",attrs:{colspan:"2"}},[t._v("请点击右下角的按钮选择词条")])]):t._e()],2)])]):s("div",{staticClass:"comb-large"},[s("table",{staticClass:"mdui-table mdui-table-hoverable comb-table"},[t._m(1),s("tbody",t._l(t.combinations,function(e,i){return s("tr",{key:"comb-"+i},[s("td",[t._v(t._s(i+1))]),s("td",t._l(e.tags,function(e){return s("button",{key:"comb-"+i+"-"+e,class:"mdui-btn mdui-btn-dense no-pe tag-btn "+t.color.selected},[t._v(t._s(e))])}),0),s("td",[s("button",{class:"mdui-btn mdui-btn-dense no-pe tag-btn "+t.color[e.min]},[t._v(t._s(e.min)+"★")])]),s("td",t._l(e.chars,function(e){return s("button",{key:"comb-"+i+"-"+e,class:"mdui-btn mdui-btn-dense tag-btn "+t.color[t.hr[e].star],attrs:{"has-avatar":t.setting.showAvatar},on:{click:function(s){return t.showDetail(e)}}},[t.setting.showAvatar?s("img",{staticClass:"tag-avatar no-pe",attrs:{src:t.$root.qhimg(t.addition[t.hr[e].name].img)}}):t._e(),t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(t.hr[e].name)+"\n\t\t\t\t\t\t\t\t\t")])}),0)])}),0)])])])]),s("div",{staticClass:"mdui-dialog mdui-card",attrs:{id:"detail"}},[s("div",{staticClass:"mdui-card-header mdui-p-b-0"},[s("img",{key:"di-"+t.detail.name,staticClass:"mdui-card-header-avatar no-pe",attrs:{src:!!t.addition[t.detail.name]&&t.$root.qhimg(t.addition[t.detail.name].img)}}),s("div",{staticClass:"mdui-card-header-title"},[s("span",[t._v(t._s(t.detail.name))]),s("button",{class:"mdui-btn mdui-btn-dense no-pe tag-btn mdui-m-l-1 mdui-m-y-0 "+t.color.selected},[t._v(t._s(t.detail.job))]),s("button",{class:"mdui-btn mdui-btn-dense no-pe tag-btn mdui-m-y-0 "+t.color[t.detail.star]},[t._v(t._s(t.detail.star)+"★")])]),s("div",{staticClass:"mdui-card-header-subtitle"},[t._v(t._s(t.detail.memo))]),s("div",{staticClass:"detail-tags"},t._l(t.detail.tags,function(e){return s("button",{key:"detail-"+e,class:"mdui-btn mdui-btn-dense no-pe tag-btn "+(t.selected.tag[e]?t.color.selected:t.color.notSelected)},[t._v(t._s(e))])}),0)]),s("div",{staticClass:"mdui-dialog-actions"},[s("a",{staticClass:"mdui-btn mdui-ripple mdui-color-teal",attrs:{href:"http://wiki.joyme.com/arknights/"+t.detail.name,target:"_blank"}},[t._v("在 Wiki 查看")]),s("button",{staticClass:"mdui-btn mdui-ripple mdui-color-pink",attrs:{"mdui-dialog-close":""}},[t._v("关闭")])])]),t.$root.smallScreen?s("button",{staticClass:"mdui-fab mdui-fab-fixed mdui-fab-mini mdui-color-pink-accent mdui-ripple",staticStyle:{"z-index":"10000"},on:{click:function(e){!t.drawer&&(t.drawer=new t.$root.Mdui.Drawer("#drawer")),t.drawer.toggle()}}},[s("i",{staticClass:"mdui-icon material-icons"},[t._v("sort")])]):t._e()]:s("mdui-progress")],2)},S=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",{staticClass:"mdui-chip-icon mdui-color-red"},[s("i",{staticClass:"mdui-icon material-icons"},[t._v("priority_high")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{staticClass:"mdui-table-col-numeric",attrs:{width:"1"}},[t._v("#")]),s("th",{attrs:{width:"20%"}},[t._v("词条")]),s("th",{staticClass:"mdui-text-center",attrs:{width:"1"}},[t._v("可保底")]),s("th",{attrs:{width:"80%"}},[t._v("可能出现（点击干员查看详细信息）")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",[t._v("词条")]),s("th",[t._v("可能出现（点击干员查看详情）")])])])}],w=s("3835"),$=s("1da1");s("55dd"),s("3b4e");let E=[];var N={name:"arkn-hr",data:()=>({l:b.a,ready:!1,showAll:!1,hr:[],addition:{},tags:{"资深干员":[],"高级资深干员":[]},selected:{star:b.a.fill(Array(6),!0),tag:{}},setting:{showAvatar:!1,hide12:!1,hideSingleFemale:!1},settingZh:{showAvatar:"显示头像",hide12:"隐藏1★2★",hideSingleFemale:"隐藏单独的“女性干员”词条"},avgCharTag:0,tagList:{sex:["男性干员","女性干员"],location:["近战位","远程位"],credentials:["新手","资深干员","高级资深干员"],job:["先锋干员","狙击干员","医疗干员","术师干员","近卫干员","重装干员","辅助干员","特种干员"],features:new Set,sort:[{zh:"资质",en:"credentials"},{zh:"位置",en:"location"},{zh:"性别",en:"sex"},{zh:"职业",en:"job"},{zh:"特性",en:"features"}]},color:{notSelected:"mdui-color-brown-300",selected:"mdui-color-grey-800",6:"mdui-color-red-700",5:"mdui-color-orange-900",4:"mdui-color-cyan-700",3:"mdui-color-green-700",2:"mdui-color-brown-700",1:"mdui-color-grey-700"},detail:0,drawer:!1}),watch:{"selected.tag":{handler(){b.a.filter(["高级资深干员","资深干员","爆发","控场","召唤"],t=>this.selected.tag[t]).length>0?this.$root.nm=!0:this.$root.nm=!1;let t=b.a.flatMap(this.selected.tag,(t,e)=>t?[e]:[]);if(t.length>6){new this.$root.Mdui.alert("最多只能同时选择 6 个词条噢！",null,null,{confirmText:"好吧",history:!1});for(let t in this.selected.tag)this.selected.tag[t]=E.includes(t);t=E}else E=t},deep:!0},setting:{handler(t){localStorage.setItem("hr.setting",JSON.stringify(t))},deep:!0}},computed:{allStar(){return b.a.sum(this.selected.star)==this.selected.star.length},combinations(){let t=b.a.flatMap(this.selected.tag,(t,e)=>t?[e]:[]),e=b.a.flatMap(this.selected.star,(t,e)=>t?[e+1]:[]),s=b.a.flatMap([1,2,3],e=>b.a.combinations(t,e)),i=[];for(let a of s){if(this.setting.hideSingleFemale&&1==a.length&&"女性干员"==a[0])continue;let t=[];for(let e of a)t.push(this.tags[e]);let s=b.a.intersection(...t);if(a.includes("高级资深干员")||b.a.remove(s,t=>6==this.hr[t].star),0==s.length)continue;let n=b.a.filter(s,t=>this.hr[t].star>=3);0==n.length&&(n=s);let l=b.a.sumBy(n,t=>this.hr[t].star)/n.length-a.length/10-n.length/this.avgCharTag,r=b.a.minBy(n,t=>this.hr[t].star);b.a.remove(s,t=>!e.includes(this.hr[t].star)),this.setting.hide12&&b.a.remove(s,t=>this.hr[t].star<3),0!=s.length&&i.push({tags:a,chars:s,min:this.hr[r].star,score:l})}return i.sort((t,e)=>t.min==e.min?e.score-t.score:e.min-t.min),i}},methods:{reset(){this.selected.star=b.a.fill(Array(this.selected.star.length),!0);for(let t in this.selected.tag)this.selected.tag[t]=!1},showDetail(t){this.detail=this.hr[t],this.$nextTick(()=>new this.$root.Mdui.Dialog("#detail",{history:!1}).open())}},created:function(){var t=Object($["a"])(function*(){var t=yield Promise.all([this.$root.getData("addition"),this.$root.getData("hr")]),e=Object(w["a"])(t,2);this.addition=e[0],this.hr=e[1],this.hr.sort((t,e)=>e.star-t.star);let s=0;const i=this.tagList.location.concat(this.tagList.credentials);this.hr.forEach((t,e)=>{let a=t.pub,n=t.sex,l=t.tags,r=t.job,o=t.star;if(a){for(let t of l)i.includes(t)||this.tagList.features.add(t);switch(o){case 5:this.tags["资深干员"].push(e);break;case 6:this.tags["高级资深干员"].push(e);break}l.push(`${n}性干员`),l.push(`${r}干员`);for(let t of l)this.tags[t]||(this.tags[t]=[]),this.tags[t].push(e);s+=l.length}});let a=b.a.size(this.tags);this.avgCharTag=s/a,this.tagList.features=Array.from(this.tagList.features).sort((t,e)=>{return t.length==e.length?t.localeCompare(e):t.length-e.length});for(let l in this.tags)this.$set(this.selected.tag,l,!1);let n=localStorage.getItem("hr.setting");n&&(this.setting=JSON.parse(n)),this.ready=!0});function e(){return t.apply(this,arguments)}return e}()},O=N,P=(s("77a5"),Object(u["a"])(O,x,S,!1,null,null,null)),j=P.exports,M=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"arkn-material"}},[t.ready?[s("div",{staticClass:"mdui-row mdui-m-t-4"},[s("div",{staticClass:"mdui-col-lg-6"},[s("table",{staticClass:"mdui-table tag-table"},[s("tbody",[s("tr",[t._m(0),s("td",[s("button",{class:"mdui-btn mdui-btn-dense mdui-ripple tag-btn "+(t.allRare?t.color.selected:t.color.notSelected),on:{click:function(e){t.selected.rare=t.l.fill(Array(t.selected.rare.length),!t.allRare)}}},[t._v("全选")]),t._l(5,function(e){return s("tag-button",{key:"rare-"+(t.rareNum+1-e),attrs:{notSelectedColor:t.color.notSelected,selectedColor:t.color[t.rareNum+1-e]},model:{value:t.selected.rare[t.rareNum-e],callback:function(s){t.$set(t.selected.rare,t.rareNum-e,s)},expression:"selected.rare[rareNum-i]"}},[t._v(" "+t._s(t.rareNum+1-e)+" ")])}),s("button",{staticClass:"mdui-btn mdui-btn-dense mdui-color-red tag-btn",on:{click:function(e){t.selected.rare=t.l.concat([!1],t.l.fill(Array(t.rareNum-1),!0))}}},[t._v("重置")])],2)]),s("tr",[t._m(1),s("td",[s("vue-tags-input",{ref:"presetInput",class:"tags-input"+(0===t.preset.length?" empty":""),attrs:{id:"preset",tags:t.selected.presets,"allow-edit-tags":!1,"add-from-paste":!1,"add-on-blur":!1,"autocomplete-items":t.presetItems,"add-only-from-autocomplete":!0,"autocomplete-always-open":!0,placeholder:"输入干员名/拼音/拼音首字母",autocomplete:"off"},on:{"tags-changed":t.usePreset,"before-adding-tag":function(e){return t.showPreset(e)}},scopedSlots:t._u([{key:"autocomplete-item",fn:function(e){return s("div",{staticClass:"mdui-list-item mdui-p-y-0 mdui-p-x-1",on:{click:function(t){return e.performAdd(e.item)}}},[s("div",{staticClass:"mdui-list-item-avatar"},[s("img",{key:"head-"+e.item.text,staticClass:"no-pe",attrs:{src:t.$root.qhimg(t.addition[e.item.text].img)}})]),s("div",{staticClass:"mdui-list-item-content mdui-p-y-0 mdui-m-l-1"},[t._v(t._s(e.item.text))])])}},{key:"tag-center",fn:function(e){return s("span",{staticClass:"no-sl",on:{click:function(s){return t.showPreset(e,!0)}}},[t._v(t._s(e.tag.text))])}}],null,!1,1172728847),model:{value:t.preset,callback:function(e){t.preset=e},expression:"preset"}})],1)]),s("tr",[t._m(2),s("td",t._l(t.settingZh,function(e,i){return s("mdui-switch",{key:i,attrs:{html:e},model:{value:t.setting[i],callback:function(e){t.$set(t.setting,i,e)},expression:"setting[en]"}})}),1)]),s("tr",[t._m(3),s("td",[s("button",{staticClass:"mdui-btn mdui-ripple mdui-btn-dense mdui-color-red tag-btn",on:{click:function(e){return t.reset()}}},[t._v("重置需求&已有")]),s("button",{staticClass:"mdui-btn mdui-ripple mdui-btn-dense mdui-color-red tag-btn",on:{click:function(e){return t.reset("need")}}},[t._v("仅重置需求")]),s("button",{staticClass:"mdui-btn mdui-ripple mdui-btn-dense mdui-color-red tag-btn",on:{click:function(e){return t.reset("have")}}},[t._v("仅重置已有")]),s("button",{staticClass:"mdui-btn mdui-ripple mdui-btn-dense mdui-color-green-600 tag-btn",on:{click:t.saveData}},[s("i",{staticClass:"mdui-icon material-icons"},[t._v("file_upload")]),t._v("备份")]),s("button",{staticClass:"mdui-btn mdui-ripple mdui-btn-dense mdui-color-blue-600 tag-btn",on:{click:t.restoreData}},[s("i",{staticClass:"mdui-icon material-icons"},[t._v("file_download")]),t._v("恢复")])])])])])]),s("div",{staticClass:"mdui-col-lg-6"},[s("material-readme",{staticClass:"mdui-hidden-md-down"}),s("div",{staticClass:"mdui-panel mdui-panel-gapless mdui-hidden-lg-up mdui-m-t-2",attrs:{"mdui-panel":""}},[s("div",{staticClass:"mdui-panel-item"},[t._m(4),s("div",{staticClass:"mdui-panel-item-body mdui-p-l-0"},[s("material-readme")],1)])])],1)]),s("div",{staticClass:"mdui-row"},t._l(t.rareNum,function(e){return s("div",{directives:[{name:"show",rawName:"v-show",value:t.showMaterials[t.rareNum+1-e].length>0,expression:"showMaterials[rareNum+1-i].length>0"}],key:"materials-"+e,staticClass:"mdui-col-xs-12"},[s("div",{staticClass:"mdui-typo rare-title"},[s("h2",[t._v("稀有度 "+t._s(t.rareNum+1-e))])]),t._l(t.materials[t.rareNum+1-e],function(i){return s("div",{directives:[{name:"show",rawName:"v-show",value:t.showMaterials[t.rareNum+1-e].includes(i.name),expression:"showMaterials[rareNum+1-i].includes(material.name)"}],key:i.name,class:"mdui-card"+(t.$root.smallScreen?"":" mdui-m-r-2")+" mdui-m-b-2 material"+(t.setting.translucentDisplay&&t.hasInput&&0==t.gaps[i.name][0]?" opacity-5":"")},[s("div",{class:"card-triangle "+t.color[t.rareNum+1-e]}),s("div",{staticClass:"mdui-card-header"},[s("div",{staticClass:"mdui-card-header-avatar mdui-valign no-sl",attrs:{t:t.rareNum+1-e}},[s("img",{staticClass:"no-pe",attrs:{src:"/img/"+i.img}})]),s("div",{class:"mdui-card-header-title"+(t.inputs[i.name].need>0?" mdui-text-color-pink-accent":"")},[t._v(t._s(i.name))]),s("div",{staticClass:"mdui-m-t-1"},[s("mdui-number-input",{staticClass:"mdui-m-r-1",model:{value:t.inputs[i.name].need,callback:function(e){t.$set(t.inputs[i.name],"need",e)},expression:"inputs[material.name].need"}},[t._v("需求")]),s("mdui-number-input",{staticClass:"mdui-m-r-1",model:{value:t.inputs[i.name].have,callback:function(e){t.$set(t.inputs[i.name],"have",e)},expression:"inputs[material.name].have"}},[t._v("已有")]),s("div",{staticClass:"gap"},[s("label",{staticClass:"mdui-textfield-label"},[t._v("仍需")]),s("span",{staticClass:"gap-num"},[t._v(t._s(t.gaps[i.name][0])),t.gaps[i.name][1]>0?s("small",[t._v("("+t._s(t.gaps[i.name][1])+")")]):t._e()])]),t.l.size(i.source)>0?s("ul",{staticClass:"source-list"},[t.superSmallScreen?s("li",{staticClass:"drop-point"},[t._v("掉落地点")]):t._e(),t._l(i.source,function(e,a){return s("li",{key:i.name+"-"+a,staticClass:"source"},[s("span",{staticClass:"point"},[t._v(t._s(a))]),s("span",{class:"probability "+t.color[e]},[t._v(t._s(e))])])})],2):t._e()],1)])])})],2)}),0)]:s("mdui-progress"),s("div",{staticClass:"mdui-dialog mdui-card",attrs:{id:"preset-setting"}},[t.sp?[s("div",{staticClass:"mdui-card-header mdui-p-b-0"},[s("img",{staticClass:"mdui-card-header-avatar no-pe",attrs:{src:!!t.addition[t.selectedPresetName]&&t.$root.qhimg(t.addition[t.selectedPresetName].img)}}),s("div",{staticClass:"mdui-card-header-title"},[t._v(t._s(t.selectedPresetName))])]),s("div",{staticClass:"mdui-card-content preset-list mdui-p-x-3"},[s("div",{staticClass:"elite-cb-list"},t._l(t.sp.elites,function(e,i){return s("mdui-checkbox",{key:"elite-"+(i+1),model:{value:t.pSetting.elites[i],callback:function(e){t.$set(t.pSetting.elites,i,e)},expression:"pSetting.elites[i]"}},[t._v("精"+t._s(i+1))])}),1),t.sp.skills.normal.length>=2?s("div",{staticClass:"skill-normal"},[s("mdui-checkbox",{staticClass:"skill-cb",model:{value:t.pSetting.skills.normal[0],callback:function(e){t.$set(t.pSetting.skills.normal,0,e)},expression:"pSetting.skills.normal[0]"}},[t._v("技能")]),s("div",{staticClass:"inline-block"},[s("mdui-select-num",{attrs:{options:t.l.range(1,t.sp.skills.normal.length+1)},on:{change:function(e){t.$root.mutation(),t.pSetting.skills.normal[1]>=t.pSetting.skills.normal[2]&&(t.pSetting.skills.normal[2]=t.pSetting.skills.normal[1]+1)}},model:{value:t.pSetting.skills.normal[1],callback:function(e){t.$set(t.pSetting.skills.normal,1,e)},expression:"pSetting.skills.normal[1]"}}),s("i",{staticClass:"mdui-icon material-icons mdui-m-x-2"},[t._v("arrow_forward")]),s("span",{key:"sn-s-"+(t.pSetting.skills.normal[1]+1)},[s("mdui-select-num",{attrs:{options:t.l.range(t.pSetting.skills.normal[1]+1,t.sp.skills.normal.length+2)},model:{value:t.pSetting.skills.normal[2],callback:function(e){t.$set(t.pSetting.skills.normal,2,e)},expression:"pSetting.skills.normal[2]"}})],1)],1)],1):t._e(),t.sp.skills.elite.length>0?t._l(t.sp.skills.elite,function(e,i){return s("div",{key:"se-"+e.name,staticClass:"skill-elite"},[s("mdui-checkbox",{staticClass:"skill-cb",model:{value:t.pSetting.skills.elite[i][0],callback:function(e){t.$set(t.pSetting.skills.elite[i],0,e)},expression:"pSetting.skills.elite[i][0]"}},[t._v(t._s(e.name))]),s("div",{staticClass:"inline-block"},[s("mdui-select-num",{attrs:{options:t.l.range(t.sp.skills.normal.length+1,t.sp.skills.normal.length+e.need.length+1)},on:{change:function(e){t.$root.mutation(),t.pSetting.skills.elite[i][1]>=t.pSetting.skills.elite[i][2]&&(t.pSetting.skills.elite[i][2]=t.pSetting.skills.elite[i][1]+1)}},model:{value:t.pSetting.skills.elite[i][1],callback:function(e){t.$set(t.pSetting.skills.elite[i],1,e)},expression:"pSetting.skills.elite[i][1]"}}),s("i",{staticClass:"mdui-icon material-icons mdui-m-x-2"},[t._v("arrow_forward")]),s("span",{key:"se-s-"+(t.pSetting.skills.elite[i][1]+1)},[s("mdui-select-num",{attrs:{options:t.l.range(t.pSetting.skills.elite[i][1]+1,t.sp.skills.normal.length+e.need.length+2)},model:{value:t.pSetting.skills.elite[i][2],callback:function(e){t.$set(t.pSetting.skills.elite[i],2,e)},expression:"pSetting.skills.elite[i][2]"}})],1)],1)],1)}):t._e()],2)]:t._e(),s("div",{staticClass:"mdui-dialog-actions"},[s("button",{staticClass:"mdui-btn mdui-ripple",attrs:{"mdui-dialog-cancel":""}},[t._v("取消")]),"add"==this.pSetting.state?s("button",{staticClass:"mdui-btn mdui-ripple mdui-color-pink",attrs:{"mdui-dialog-confirm":""},on:{click:t.addPreset}},[t._v("添加")]):t._e(),"edit"==this.pSetting.state?s("button",{staticClass:"mdui-btn mdui-ripple mdui-color-teal",attrs:{"mdui-dialog-confirm":""},on:{click:t.editPreset}},[t._v("修改")]):t._e()])],2)],2)},D=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{attrs:{width:"1"}},[s("button",{staticClass:"mdui-btn mdui-btn-dense mdui-color-teal no-pe tag-btn"},[t._v("稀有")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{attrs:{width:"1"}},[s("button",{staticClass:"mdui-btn mdui-btn-dense mdui-color-teal no-pe tag-btn"},[t._v("预设")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{attrs:{width:"1"}},[s("button",{staticClass:"mdui-btn mdui-btn-dense mdui-color-teal no-pe tag-btn"},[t._v("选项")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{attrs:{width:"1"}},[s("button",{staticClass:"mdui-btn mdui-btn-dense mdui-color-teal no-pe tag-btn"},[t._v("操作")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"mdui-panel-item-header"},[s("div",{staticClass:"mdui-panel-item-title"},[t._v("说明")]),s("i",{staticClass:"mdui-panel-item-arrow mdui-icon material-icons"},[t._v("keyboard_arrow_down")])])}],I=(s("28a5"),s("6b54"),function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)}),T=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",{staticClass:"mdui-typo mdui-m-y-0",staticStyle:{"font-size":"14px"}},[s("li",[t._v("设置与输入会自动保存，点击对应的重置按钮可重置输入")]),s("li",[t._v("在材料卡片的"),s("code",[t._v("仍需")]),t._v("中，小字括号中的数字表示可以合成的数量")]),s("li",[s("span",{staticClass:"mdui-text-color-pink-accent"},[t._v("粉色字材料")]),t._v("代表该材料存在原始需求，而不仅仅是上位材料所需的合成材料")]),s("li",[t._v("在"),s("code",[t._v("预设")]),t._v("中可通过输入干员名字（汉字、拼音或拼音首字母）选择干员，然后选择精英化及技能来添加预设，将自动统计所需材料")]),s("li",[t._v("可添加多个预设，点击已添加的预设可以进行编辑；添加预设将会丢弃当前所有的"),s("code",[t._v("需求")]),t._v("输入")]),s("li",[t._v("在点击"),s("code",[t._v("重置需求&已有")]),t._v("或"),s("code",[t._v("仅重置需求")]),t._v("按钮后，预设将一并被清空")])])}],L={name:"material-readme",mounted(){this.$root.mutation()}},z=L,A=Object(u["a"])(z,I,T,!1,null,null,null),J=A.exports,B=s("c7a0"),W=s.n(B),V=s("27ae");let G={elites:[!1,!1],skills:{normal:[!1,1,7],elite:[[!1,7,10],[!1,7,10],[!1,7,10]]},state:"add"};function Z(t){return t<0?0:t}var q={name:"arkn-material",components:{VueTagsInput:W.a,MaterialReadme:J},data:()=>({l:b.a,ready:!1,showAll:!1,materials:{},addition:{},elite:{},inputs:{},preset:"",selectedPresetName:"",selectedPreset:!1,pSetting:b.a.cloneDeep(G),pDialog:!1,selected:{rare:[],presets:[]},setting:{hideIrrelevant:!1,translucentDisplay:!0,stopSynthetiseLE3:!1},settingZh:{hideIrrelevant:"隐藏无关素材",translucentDisplay:"半透明显示已满足需求的素材",stopSynthetiseLE3:'不计算<span class="mdui-text-color-blue-600">稀有度3</span>及以下材料的合成需求'},color:{notSelected:"mdui-color-brown-300",selected:"mdui-color-grey-800",5:"mdui-color-yellow-700",4:"mdui-color-deep-purple-300",3:"mdui-color-blue-600",2:"mdui-color-lime",1:"mdui-color-grey-700","固定":"mdui-color-grey-900","小概率":"mdui-color-grey-300","中概率":"mdui-color-grey-500","大概率":"mdui-color-grey-700","罕见":"mdui-color-red-900"}}),watch:{setting:{handler:t=>localStorage.setItem("material.setting",JSON.stringify(t)),deep:!0},selected:{handler:t=>localStorage.setItem("material.selected",JSON.stringify(t)),deep:!0},inputs:{handler(t){for(let e of Object.values(t))for(let t of Object.keys(e)){if(!["need","have"].includes(t)){delete e[t];continue}let s=e[t],i=/[^0-9]/.exec(s);i&&(e[t]=(parseInt(/[0-9]*/.exec(s)[0])||0).toString())}localStorage.setItem("material.inputs",JSON.stringify(t))},deep:!0}},computed:{allRare(){return b.a.sum(this.selected.rare)==this.rareNum},superSmallScreen(){return this.$root.screenWidth<=354},rareNum(){return b.a.size(this.materials)},inputsInt(){let t={};for(let e in this.inputs)t[e]=b.a.mapValues(this.inputs[e],t=>parseInt(t)||0);return t},gaps(){let t=this.inputsInt,e=b.a.mapValues(t,t=>t.need),s=b.a.mapValues(t,()=>0),i=b.a.mapValues(t,()=>0);return b.a.forInRight(this.materials,(s,i)=>{for(let a of s){let s=a.name,n=a.madeof;e[s]=Z(e[s]-t[s].have),this.setting.stopSynthetiseLE3&&i<=3||b.a.forIn(n,(t,i)=>{e[i]+=e[s]*t})}}),b.a.forIn(this.materials,(t,a)=>{for(let n of t){let t=n.name,l=n.madeof;if(!(0==b.a.size(l)||this.setting.stopSynthetiseLE3&&a<=3))while(e[t]>0&&b.a.every(l,(t,e)=>this.inputsInt[e].have+s[e]-i[e]-t>=0))e[t]--,s[t]++,b.a.forEach(l,(t,e)=>i[e]+=t)}}),b.a.mergeWith(e,s,(t,e)=>[t,e])},hasDataMaterials(){return b.a.mapValues(this.materials,t=>{let e=[];for(let s of t){let t=s.name;this.inputsInt[t].need+this.inputsInt[t].have+this.gaps[t][0]+this.gaps[t][1]>0&&e.push(t)}return e})},showMaterials(){return b.a.mapValues(this.materials,(t,e)=>{let s=[];for(let i of t){let t=i.name;(this.inputsInt[t].need>0||0==this.inputsInt[t].need&&this.selected.rare[e-1]&&(this.hasDataMaterials[e].includes(t)||!this.hasDataMaterials[e].includes(t)&&!this.setting.hideIrrelevant))&&s.push(t)}return s})},hasInput(){let t=0;for(let e=1;e<=this.rareNum;e++)t+=this.hasDataMaterials[e].length;return t},presetItems(){let t=this.preset.toLowerCase(),e=[];for(let s in this.elite){let i=this.addition[s],a=i.full,n=i.head,l=[s.indexOf(t),a.indexOf(t),n.indexOf(t)];b.a.every(l,t=>-1===t)||e.push({pos:b.a.min(l.filter(t=>t>=0)),name:s})}return e.sort((t,e)=>t.pos==e.pos?t.name.length-e.name.length:t.pos-e.pos),b.a.map(e,t=>({text:t.name})).slice(0,10)},sp(){return 0!==this.selectedPresetName.length&&this.elite[this.selectedPresetName]},checkPSetting(){const t=this.pSetting;let e=[...t.elites,t.skills.normal[0],...b.a.map(t.skills.elite,t=>t[0])];return b.a.sum(e)>0}},methods:{reset(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e&&(t&&"have"==t||(this.selected.presets=[]));for(let s in this.inputs){let e=this.inputs[s];if(t)e[t]="";else for(let t in e)e[t]=""}},addNeed(t){b.a.each(t,(t,e)=>{let s=parseInt(this.inputs[e].need)||0;this.inputs[e].need=(s+t).toString()})},usePreset(t){t&&(this.selected.presets=t),this.reset("need",!1);for(let s of this.selected.presets){let t=s.text;var e=s.setting;let i=e.elites,a=e.skills;const n=this.elite[t];if(n.elites.forEach((t,e)=>{i[e]&&this.addNeed(t)}),a.normal[0])for(let e=a.normal[1]-1;e<a.normal[2]-1;e++)this.addNeed(n.skills.normal[e]);n.skills.elite.forEach((t,e)=>{const s=a.elite[e];if(!s[0])return;const i=n.skills.normal.length+1;for(let a=s[1]-i;a<s[2]-i;a++)this.addNeed(n.skills.elite[e].need[a])})}localStorage.setItem("material.selected",JSON.stringify(this.selected))},showPreset(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.selectedPreset=t,this.selectedPresetName=t.tag.text,this.pSetting=e?b.a.cloneDeep(this.selected.presets[t.index].setting):b.a.cloneDeep(G),this.$nextTick(()=>{this.pDialog.open(),this.$root.mutation()})},addPreset(){this.checkPSetting?(this.selectedPreset.tag.setting=b.a.cloneDeep(this.pSetting),this.selectedPreset.tag.setting.state="edit",this.selectedPreset.addTag()):this.$root.snackbar("什么也没勾选呢……")},editPreset(){this.checkPSetting?(this.selected.presets[this.selectedPreset.index].setting=b.a.cloneDeep(this.pSetting),this.usePreset()):this.$root.snackbar("什么也没勾选呢……")},saveData(){const t=this.$root.Mdui;let e={inputs:this.inputs,presets:this.selected.presets},s=V["Base64"].encode(JSON.stringify(e));t.prompt("请保存文本框中的所有内容","导出备份",()=>{t.JQ(".mdui-dialog input")[0].select(),document.execCommand("copy"),t.snackbar("复制成功")},()=>{},{history:!1,defaultValue:s,cancelText:"关闭",confirmText:"复制到剪贴板"})},restoreData(){const t=this.$root.Mdui;t.prompt("请在文本框中粘贴上次保存的内容","导入备份",e=>{if(0!=e.length)try{let i=JSON.parse(V["Base64"].decode(e)),a=i.inputs,n=i.presets;this.inputs=a,this.selected.presets=n,t.snackbar("导入成功")}catch(s){t.snackbar("导入失败，输入有误")}},()=>{},{history:!1,cancelText:"取消",confirmText:"导入"})}},created:function(){var t=Object($["a"])(function*(){var t=yield Promise.all([this.$root.getData("addition"),this.$root.getData("elite"),this.$root.getData("material")]),e=Object(w["a"])(t,3);this.addition=e[0],this.elite=e[1],this.materials=e[2];for(let s of this.materials){let t=s.name;this.$set(this.inputs,t,{need:"",have:""})}this.materials=b.a.groupBy(this.materials,t=>t.rare),this.selected.rare=b.a.concat([!1],b.a.fill(Array(this.rareNum-1),!0));for(let s in localStorage){if(!s.startsWith("material."))continue;let t=s.split(".")[1];this[t]=Object.assign({},this[t],JSON.parse(localStorage.getItem(s)))}for(let s in this.inputs){let t=this.inputs[s];for(let e in t)0==t[e]&&(t[e]="")}this.ready=!0});function e(){return t.apply(this,arguments)}return e}(),mounted(){window.mutation=this.$root.mutation,this.pDialog=new this.$root.Mdui.Dialog("#preset-setting",{history:!1}),this.$root.Mdui.JQ("#preset-setting")[0].addEventListener("closed.mdui.dialog",()=>this.selectedPresetName="")}},Q=q,R=(s("1d8e"),Object(u["a"])(Q,M,D,!1,null,null,null)),F=R.exports,U=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"arkn-level"}},[s("div",{staticClass:"mdui-row mdui-m-t-4"},[s("div",{staticClass:"mdui-col-md-5"},[s("table",{staticClass:"mdui-table tag-table"},[s("tbody",[s("tr",[t._m(0),s("td",{staticClass:"mdui-valign"},[s("div",{staticClass:"with-label mdui-m-r-3"},[s("label",{staticClass:"mdui-textfield-label"},[t._v("星级")]),s("mdui-select-num",{attrs:{options:t.l.range(6,0)},on:{change:t.updateSelect},model:{value:t.inputs.star,callback:function(e){t.$set(t.inputs,"star",e)},expression:"inputs.star"}})],1),t._m(1),t._m(2),s("button",{staticClass:"mdui-btn mdui-ripple mdui-btn-dense mdui-color-red tag-btn",on:{click:t.reset}},[t._v("重置")])])]),s("tr",[t._m(3),s("td",{staticClass:"mdui-valign"},[s("div",{staticClass:"with-label mdui-m-r-3"},[s("label",{staticClass:"mdui-textfield-label"},[t._v("精英化")]),s("mdui-select-num",{staticClass:"select-need-update",attrs:{options:t.l.range(0,t.maxElite[t.inputs.star-1]+1)},on:{change:t.updateSelect},model:{value:t.inputs.current.elite,callback:function(e){t.$set(t.inputs.current,"elite",e)},expression:"inputs.current.elite"}})],1),s("mdui-number-input",{staticClass:"mdui-m-r-3",model:{value:t.inputs.current.level,callback:function(e){t.$set(t.inputs.current,"level",t._n(e))},expression:"inputs.current.level"}},[t._v("等级")]),s("mdui-number-input",{staticStyle:{width:"80px"},model:{value:t.inputs.current.exp,callback:function(e){t.$set(t.inputs.current,"exp",t._n(e))},expression:"inputs.current.exp"}},[t._v("经验")])],1)]),s("tr",[t._m(4),s("td",{staticClass:"mdui-valign"},[s("div",{staticClass:"with-label mdui-m-r-3"},[s("label",{staticClass:"mdui-textfield-label"},[t._v("精英化")]),s("mdui-select-num",{staticClass:"select-need-update",attrs:{options:t.l.range(t.inputs.current.elite,t.maxElite[t.inputs.star-1]+1)},on:{change:t.updateSelect},model:{value:t.inputs.target.elite,callback:function(e){t.$set(t.inputs.target,"elite",e)},expression:"inputs.target.elite"}})],1),s("mdui-number-input",{model:{value:t.inputs.target.level,callback:function(e){t.$set(t.inputs.target,"level",t._n(e))},expression:"inputs.target.level"}},[t._v("等级")])],1)]),s("tr",[t._m(5),s("td",{staticClass:"mdui-valign"},[t._l(t.l.range(5,1),function(e){return s("div",{key:"have-"+e,staticClass:"mdui-m-r-2 mdui-m-b-1 mdui-valign"},[s("arkn-item",{attrs:{t:e,img:"E-"+e+"-1"}}),s("mdui-number-input",{staticClass:"exp-input",model:{value:t.inputs.have[e],callback:function(s){t.$set(t.inputs.have,e,t._n(s))},expression:"inputs.have[i]"}},[t._v(t._s(t.expZh[e-2]))])],1)}),s("div",{staticClass:"mdui-m-r-2 mdui-m-b-1 mdui-valign"},[s("arkn-item",{attrs:{t:"4",img:"G-4-1"}}),s("mdui-number-input",{staticClass:"exp-input",staticStyle:{width:"80px"},model:{value:t.inputs.money,callback:function(e){t.$set(t.inputs,"money",t._n(e))},expression:"inputs.money"}},[t._v("龙门币")])],1)],2)])])])]),s("div",{staticClass:"mdui-col-md-7 mdui-p-x-2 mdui-typo"},[s("h2",{staticClass:"mdui-hidden-sm-down mdui-m-t-0"},[t._v("至少需要")]),s("h2",{staticClass:"mdui-hidden-md-up"},[t._v("总需求")]),s("div",{staticClass:"num-item-list"},[s("arkn-num-item",{attrs:{t:"5",img:"EO-4-1",lable:"经验值",num:t.result.exp}}),s("arkn-num-item",{staticClass:"mdui-m-r-0",attrs:{t:"4",img:"G-4-1",lable:"龙门币(总共)",num:t.result.cost}}),t.inputs.money?s("arkn-num-item",{attrs:{t:"4",img:"G-4-1",lable:"龙门币(仍需)",num:t.ge0(t.result.cost-t.inputs.money)}}):t._e()],1),s("h2",[t._v("物资筹备")]),s("h3",{staticClass:"mdui-m-t-0"},[t._v("LS-5 "),s("small",[t._v("× "+t._s(t.result.ls5))])]),s("div",{staticClass:"num-item-list mdui-valign"},[s("arkn-num-item",{attrs:{t:"0",img:"AP",lable:"理智",num:30*t.result.ls5}}),t._l([5,4,3],function(e){return s("arkn-num-item",{key:"ls5-"+e,attrs:{t:e,img:"E-"+e+"-1",lable:t.expZh[e-2],num:t.result.ls5*t.LS5.drop[e]}})}),s("arkn-num-item",{attrs:{t:"4",img:"G-4-1",lable:"龙门币",num:t.result.ls5*t.LS5.money}})],2),s("h3",[t._v("CE-5 "),s("small",[t._v("× "+t._s(t.result.ce5))])]),s("div",{staticClass:"num-item-list mdui-valign"},[s("arkn-num-item",{attrs:{t:"0",img:"AP",lable:"理智",num:30*t.result.ce5}}),s("arkn-num-item",{attrs:{t:"4",img:"G-4-1",lable:"龙门币",num:t.result.ce5*t.CE5.money}})],1),s("h2",[t._v("预计消耗")]),s("div",{staticClass:"num-item-list"},t._l([5,4,3,2],function(e){return s("arkn-num-item",{key:"num-item-"+e,attrs:{t:e,img:"E-"+e+"-1",lable:t.expZh[e-2]}},[s("span",{staticClass:"mdui-text-color-black-secondary"},[t._v(t._s(t.result.use[e]))]),t._v(" / "+t._s(t.result.have[e])+"\n\t\t\t\t")])}),1)])])])},H=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{attrs:{width:"1"}},[s("button",{staticClass:"mdui-btn mdui-btn-dense mdui-color-teal no-pe tag-btn"},[t._v("通用")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"with-label mdui-m-r-3"},[s("label",{staticClass:"mdui-textfield-label"},[t._v("经验本")]),s("span",[t._v("LS-5")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"with-label mdui-m-r-3"},[s("label",{staticClass:"mdui-textfield-label"},[t._v("金币本")]),s("span",[t._v("CE-5")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{attrs:{width:"1"}},[s("button",{staticClass:"mdui-btn mdui-btn-dense mdui-color-teal no-pe tag-btn"},[t._v("当前")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{attrs:{width:"1"}},[s("button",{staticClass:"mdui-btn mdui-btn-dense mdui-color-teal no-pe tag-btn"},[t._v("目标")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("td",{attrs:{width:"1"}},[s("button",{staticClass:"mdui-btn mdui-btn-dense mdui-color-teal no-pe tag-btn"},[t._v("已有")])])}],K=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"no-sl mdui-m-r-1",attrs:{t:t.t}},[s("div",{staticClass:"mdui-valign",staticStyle:{height:"100%"}},[s("img",{staticClass:"no-pe item-img",attrs:{src:"/img/"+t.img+".png"}})])])},X=[],Y={name:"arkn-item",props:{t:[Number,String],img:String}},tt=Y,et=(s("2992"),Object(u["a"])(tt,K,X,!1,null,"2e8234d4",null)),st=et.exports,it=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"num-item"},[s("div",{staticClass:"mdui-valign"},[s("arkn-item",{attrs:{t:t.t,img:t.img}}),s("div",{staticClass:"with-label"},[s("label",{staticClass:"mdui-textfield-label"},[t._v(t._s(t.lable))]),t.num?s("span",[t._v(t._s(t.num))]):s("span",[t._t("default")],2)])],1)])},at=[],nt={name:"arkn-num-item",components:{ArknItem:st},props:{t:[Number,String],img:String,lable:String,num:[Number,String]}},lt=nt,rt=(s("b7b1"),Object(u["a"])(lt,it,at,!1,null,null,null)),ot=rt.exports,ct=s("17a1");const ut={5:2e3,4:1e3,3:400,2:200},dt={exp:7400,drop:{5:3,4:1,3:1,2:0},money:360},mt={money:7500},pt={star:6,current:{elite:0,level:1,exp:0},target:{elite:0,level:1},have:{5:0,4:0,3:0,2:0},money:0};function ht(t){return Math.max(t,0)}var gt={name:"arkn-level",components:{ArknItem:st,ArknNumItem:ot},data:()=>({l:b.a,inputs:b.a.cloneDeep(pt),expZh:["基础","初级","中级","高级"],maxElite:b.a.map(ct["c"],t=>t.length),LS5:dt,CE5:mt}),watch:{inputs:{handler(t){const e=t.star,s=t.current;t.target,t.have;for(let i of["current","target"]){let s=`${i}.level`,a=b.a.get(t,s);if(""!==a){let n=ct["d"][e-1][t[i].elite];a<1?b.a.set(t,s,1):a>n&&b.a.set(t,s,n)}}if(s.exp){s.exp<0&&(s.exp=0);let t=ct["a"][s.elite][(s.level||1)-1]||1;s.exp>=t&&(s.exp=t-1)}b.a.each(t.have,(t,e,s)=>{t&&t<0&&(s[e]=0)}),localStorage.setItem("level.inputs",JSON.stringify(t))},deep:!0}},computed:{result(){const t=this.inputs,e=t.star,s=t.current,i=t.target,a=t.have,n=t.money,l=ct["d"][e-1],r=b.a.sum(b.a.map(a,(t,e)=>t*ut[e]));let o=0,c=0,u=[],d={5:0,4:0,3:0,2:0};if(i.elite>s.elite||i.level>s.level){const t=ct["a"][s.elite][s.level-1];if(t){let e=t-s.exp,i=e/t*ct["b"][s.elite][s.level-1];o+=e,c+=i}for(let a=s.elite;a<=i.elite;a++,u.push(o)){a>s.elite&&(c+=ct["c"][e-1][a-1]);let t=a==i.elite?i.level:l[a];for(let e=a==s.elite?s.level+1:1;e<t;e++)o+=ct["a"][a][e-1],c+=ct["b"][a][e-1]}}let m=ht(Math.ceil((o-r)/dt.exp));if(u.length>0){b.a.forEachRight(u,(t,e,s)=>{e>0&&(s[e]-=s[e-1])});let t=b.a.mapValues(dt.drop,(t,e)=>a[e]+t*m);for(let e of u)while(e>0){0==b.a.sum(Object.values(t))&&(m++,t=b.a.cloneDeep(dt.drop));for(let s=5;s>=2;s--)while(e>=ut[s]&&t[s]>0)d[s]++,t[s]--,e-=ut[s];for(let s=2;s<=5;s++)while(e>0&&t[s]>0)d[s]++,t[s]--,e-=ut[s]}}let p=ht(Math.ceil((c-m*dt.money-n)/mt.money));return{exp:o,cost:Math.ceil(c),ls5:m,ce5:p,use:d,have:b.a.mapValues(dt.drop,(t,e)=>a[e]+t*m)}}},methods:{ge0:ht,updateSelect(){const t=this.inputs,e=t.star,s=t.current,i=t.target,a=this.maxElite[e-1];s.elite>a&&(s.elite=a),i.elite>a&&(i.elite=a),s.elite>i.elite&&(i.elite=s.elite);const n=this.$root.Mdui.JQ;this.$nextTick(()=>n(".select-need-update").each((t,e)=>new this.$root.Mdui.Select(e).handleUpdate()))},reset(){this.inputs=b.a.cloneDeep(pt)}},created(){let t=localStorage.getItem("level.inputs");t&&(this.inputs=JSON.parse(t))}},vt=gt,bt=(s("8dd5"),Object(u["a"])(vt,U,H,!1,null,null,null)),ft=bt.exports;i["a"].use(p["a"]);var _t=new p["a"]({routes:[{path:"/",name:"home",component:y},{path:"/hr",name:"arkn-hr",component:j},{path:"/material",name:"arkn-material",component:F},{path:"/level",name:"arkn-level",component:ft}]}),kt=s("8103"),Ct=s.n(kt),yt=s("bba4"),xt=s.n(yt);i["a"].config.productionTip=!1;const St=s("aa90");St.keys().forEach(t=>{const e=St(t),s=Ct()(xt()(t.replace(/^\.\/(.*)\.\w+$/,"$1")));i["a"].component(s,e.default||e)});const wt=n.a.JQ;_t.afterEach(()=>{i["a"].nextTick(()=>{wt(".router-link-active:not(.router-root)").addClass("mdui-tab-active"),n.a.mutation()})}),new i["a"]({router:_t,render:t=>t(m),data:{Mdui:n.a,JQ:wt,screenWidth:0,nm:!1},methods:{mutation:function(){i["a"].nextTick(n.a.mutation)},qhimg(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:80;return`http://p0.qhimg.com/dr/${e}__/${t}`},get(t){return new Promise((e,s)=>{n.a.JQ.ajax({method:"GET",url:t,success:s=>{t.endsWith(".json")?e(JSON.parse(s)):e(s)},error:t=>s(t)})})},getData(t){return this.get(`/data/${t}.json`)},snackbar:n.a.snackbar,calcSize(t){const e=["B","KB","MB"];let s=0;while(t>1024&&s<2)t/=1024,s++;return`${t.toFixed(2)} ${e[s]}`}},mounted(){this.screenWidth=wt("body").width(),window.onresize=()=>{this.screenWidth=wt("body").width()}},computed:{smallScreen(){return this.$root.screenWidth<=450}}}).$mount("#app")},5951:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("select",{staticClass:"mdui-select",attrs:{"mdui-select":""},domProps:{value:t.value},on:{change:function(e){t.$emit("change",parseInt(e.target.value))}}},t._l(t.options,function(e){return s("option",{key:"opt-"+e,domProps:{value:e}},[t._v(t._s(e))])}),0)},a=[],n={name:"mdui-select-num",model:{event:"change"},props:{value:[Number,String],options:Array}},l=n,r=s("2877"),o=Object(r["a"])(l,i,a,!1,null,null,null);e["default"]=o.exports},"5def":function(t,e,s){"use strict";var i=s("f420"),a=s.n(i);a.a},"601f":function(t,e,s){},6138:function(t,e,s){t.exports=s.p+"img/amiya-nm.667e2801.gif"},"64a9":function(t,e,s){},"77a5":function(t,e,s){"use strict";var i=s("3b81"),a=s.n(i);a.a},"8dd5":function(t,e,s){"use strict";var i=s("46aa"),a=s.n(i);a.a},"9e70":function(t,e,s){},a07d:function(t,e,s){},aa01:function(t,e,s){},aa90:function(t,e,s){var i={"./_MduiCheckbox.vue":"c0be","./_MduiNumberInput.vue":"2fea","./_MduiProgress.vue":"0e7c","./_MduiSelect.vue":"ad51","./_MduiSelectNum.vue":"5951","./_MduiSwitch.vue":"b24e","./_TagButton.vue":"be5b"};function a(t){var e=n(t);return s(e)}function n(t){var e=i[t];if(!(e+1)){var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}return e}a.keys=function(){return Object.keys(i)},a.resolve=n,t.exports=a,a.id="aa90"},ad51:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("select",{staticClass:"mdui-select",attrs:{"mdui-select":""},domProps:{value:t.value},on:{change:function(e){return t.$emit("change",e.target.value)}}},["string"==typeof t.options[0]?t._l(t.options,function(e){return s("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])}):t._l(t.options,function(e){return s("option",{key:e.value,domProps:{value:e.value}},[t._v(t._s(e.text))])})],2)},a=[],n={name:"mdui-select",model:{event:"change"},props:{value:String,options:Array}},l=n,r=s("2877"),o=Object(r["a"])(l,i,a,!1,null,null,null);e["default"]=o.exports},b24e:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{staticClass:"mdui-switch"},[s("input",{attrs:{type:"checkbox"},domProps:{checked:t.checked},on:{change:function(e){return t.$emit("change",e.target.checked)}}}),s("i",{staticClass:"mdui-switch-icon mdui-m-r-1"}),t.html?s("span",{domProps:{innerHTML:t._s(t.html)}}):s("span",[t._t("default")],2)])},a=[],n={name:"mdui-switch",model:{prop:"checked",event:"change"},props:{checked:Boolean,html:String}},l=n,r=s("2877"),o=Object(r["a"])(l,i,a,!1,null,null,null);e["default"]=o.exports},b3f6:function(t,e,s){"use strict";var i=s("9e70"),a=s.n(i);a.a},b7b1:function(t,e,s){"use strict";var i=s("a07d"),a=s.n(i);a.a},bd6f:function(t,e,s){t.exports=s.p+"img/amiya.dbcf93e0.gif"},be5b:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{class:"mdui-btn mdui-btn-dense mdui-ripple tag-btn "+(t.checked?t.selectedColor:t.notSelectedColor)},[s("input",{staticStyle:{display:"none"},attrs:{type:"checkbox"},domProps:{checked:t.checked},on:{change:function(e){return t.$emit("change",e.target.checked)}}}),t._t("default")],2)},a=[],n={name:"tag-button",model:{prop:"checked",event:"change"},props:{checked:Boolean,selectedColor:String,notSelectedColor:String}},l=n,r=s("2877"),o=Object(r["a"])(l,i,a,!1,null,null,null);e["default"]=o.exports},c0be:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("label",{staticClass:"mdui-checkbox mdui-p-l-4"},[s("input",t._b({attrs:{type:"checkbox"},domProps:{checked:t.checked},on:{change:function(e){return t.$emit("change",e.target.checked)}}},"input",t.$attrs,!1)),s("i",{staticClass:"mdui-checkbox-icon"}),s("span",{staticClass:"cb-text"},[t._t("default")],2)])},a=[],n={name:"mdui-checkbox",model:{prop:"checked",event:"change"},props:{checked:Boolean}},l=n,r=(s("b3f6"),s("2877")),o=Object(r["a"])(l,i,a,!1,null,"ea98ef6a",null);e["default"]=o.exports},d12e:function(t,e,s){"use strict";var i=s("aa01"),a=s.n(i);a.a},f420:function(t,e,s){}});