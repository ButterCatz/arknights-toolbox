(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["hr"],{"0f8f":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"arkn-hr"}},[t.ready?[a("div",{staticClass:"mdui-row"},[a("div",{staticClass:"mdui-col-xs-12"},[a("div",{class:t.$root.smallScreen?"mdui-drawer mdui-drawer-right mdui-drawer-close":"mdui-m-t-4",attrs:{id:"drawer"}},[a("table",{staticClass:"mdui-table tag-table"},[a("tbody",[a("tr",[t.$root.smallScreen?t._e():a("td",{attrs:{width:"1"}},[a("button",{staticClass:"mdui-btn mdui-btn-dense mdui-color-teal no-pe tag-btn"},[t._v("星级")])]),a("td",{attrs:{colspan:!!t.$root.smallScreen&&2}},[t.$root.smallScreen?a("label",{staticClass:"mdui-textfield-label"},[t._v("星级")]):t._e(),a("button",{class:"mdui-btn mdui-btn-dense mdui-ripple tag-btn "+(t.allStar?t.color.selected:t.color.notSelected),on:{click:function(e){t.selected.star=t.l.fill(Array(t.selected.star.length),!t.allStar)}}},[t._v("全选")]),t._l(6,function(e){return a("tag-button",{key:"star-"+(7-e),attrs:{notSelectedColor:t.color.notSelected,selectedColor:t.color[7-e]},model:{value:t.selected.star[6-e],callback:function(a){t.$set(t.selected.star,6-e,a)},expression:"selected.star[6-i]"}},[t._v(t._s(7-e)+"★")])})],2)]),t._l(t.tagList.sort,function(e){return a("tr",{key:e.en},[t.$root.smallScreen?t._e():a("td",[a("button",{staticClass:"mdui-btn mdui-btn-dense mdui-color-teal no-pe tag-btn"},[t._v(t._s(e.zh))])]),a("td",{attrs:{colspan:!!t.$root.smallScreen&&2}},[t.$root.smallScreen?a("label",{staticClass:"mdui-textfield-label"},[t._v(t._s(e.zh))]):t._e(),t._l(t.tagList[e.en],function(e){return a("tag-button",{key:e,attrs:{notSelectedColor:t.color.notSelected,selectedColor:t.color.selected},on:{"!click":function(e){return t.test(e)}},model:{value:t.selected.tag[e],callback:function(a){t.$set(t.selected.tag,e,a)},expression:"selected.tag[tag]"}},[t._v(t._s(e))])})],2)])}),a("tr",[t.$root.smallScreen?t._e():a("td",{attrs:{width:"1"}},[a("label",{staticClass:"mdui-textfield-label",staticStyle:{opacity:"0"}},[t._v("_")]),a("button",{staticClass:"mdui-btn mdui-btn-dense mdui-color-red tag-btn",on:{click:t.reset}},[t._v("重置")])]),a("td",{attrs:{colspan:!!t.$root.smallScreen&&2}},[a("label",{staticClass:"mdui-textfield-label"},[t._v("设置项（这些设置会被永久保存）")]),t._l(t.settingZh,function(e,s){return a("mdui-switch",{key:s,model:{value:t.setting[s],callback:function(e){t.$set(t.setting,s,e)},expression:"setting[en]"}},[t._v(t._s(e))])})],2)]),t.$root.smallScreen?a("tr",[a("td",{attrs:{colspan:"2"}},[a("button",{staticClass:"mdui-btn mdui-ripple mdui-btn-dense mdui-color-red tag-btn",on:{click:t.reset}},[t._v("重置")])])]):t._e()],2)])])])]),t.selected.tag["高级资深干员"]?a("div",{staticClass:"mdui-chip mdui-m-t-4"},[t._m(0),a("span",{staticClass:"mdui-chip-title mdui-text-truncate",style:t.$root.screenWidth<360&&"font-size:12px"},[t._v("请拉满 9 个小时以保证“高级资深干员”不被划掉")])]):t._e(),a("div",{staticClass:"mdui-row mdui-m-t-4"},[a("div",{staticClass:"mdui-col-xs-12"},[t.$root.smallScreen?a("div",{staticClass:"comb-small"},[a("table",{staticClass:"mdui-table comb-table mdui-shadow-0 no-border"},[t._m(2),a("tbody",[t._l(t.combinations,function(e,s){return[a("tr",{key:"comb-"+s+"-tr1"},[a("td",{staticClass:"mdui-p-b-0 no-border",attrs:{colspan:"2"}},t._l(e.tags,function(e){return a("button",{key:"comb-"+s+"-"+e,class:"mdui-btn mdui-btn-dense no-pe tag-btn "+t.color.selected},[t._v(t._s(e))])}),0)]),a("tr",{key:"comb-"+s+"-tr2"},[a("td",{attrs:{colspan:"2"}},t._l(e.chars,function(e){return a("button",{key:"comb-"+s+"-"+e,class:"mdui-btn mdui-btn-dense tag-btn "+t.color[t.hr[e].star],attrs:{"has-avatar":t.setting.showAvatar},on:{click:function(a){return t.showDetail(e)}}},[t.setting.showAvatar?a("img",{staticClass:"tag-avatar no-pe",attrs:{src:t.$root.qhimg(t.addition[t.hr[e].name].img)}}):t._e(),t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(t.hr[e].name)+"\n\t\t\t\t\t\t\t\t\t\t")])}),0)])]}),0==t.combinations.length?a("tr",[a("td",{staticClass:"no-border",attrs:{colspan:"2"}},[t._v("请点击右下角的按钮选择词条")])]):t._e()],2)])]):a("div",{staticClass:"comb-large"},[a("table",{staticClass:"mdui-table mdui-table-hoverable comb-table"},[t._m(1),a("tbody",t._l(t.combinations,function(e,s){return a("tr",{key:"comb-"+s},[a("td",[t._v(t._s(s+1))]),a("td",t._l(e.tags,function(e){return a("button",{key:"comb-"+s+"-"+e,class:"mdui-btn mdui-btn-dense no-pe tag-btn "+t.color.selected},[t._v(t._s(e))])}),0),a("td",[a("button",{class:"mdui-btn mdui-btn-dense no-pe tag-btn "+t.color[e.min]},[t._v(t._s(e.min)+"★")])]),a("td",t._l(e.chars,function(e){return a("button",{key:"comb-"+s+"-"+e,class:"mdui-btn mdui-btn-dense tag-btn "+t.color[t.hr[e].star],attrs:{"has-avatar":t.setting.showAvatar},on:{click:function(a){return t.showDetail(e)}}},[t.setting.showAvatar?a("img",{staticClass:"tag-avatar no-pe",attrs:{src:t.$root.qhimg(t.addition[t.hr[e].name].img)}}):t._e(),t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(t.hr[e].name)+"\n\t\t\t\t\t\t\t\t\t")])}),0)])}),0)])])])]),a("div",{staticClass:"mdui-dialog mdui-card",attrs:{id:"detail"}},[a("div",{staticClass:"mdui-card-header mdui-p-b-0"},[a("img",{key:"di-"+t.detail.name,staticClass:"mdui-card-header-avatar no-pe",attrs:{src:!!t.addition[t.detail.name]&&t.$root.qhimg(t.addition[t.detail.name].img)}}),a("div",{staticClass:"mdui-card-header-title"},[a("span",[t._v(t._s(t.detail.name))]),a("button",{class:"mdui-btn mdui-btn-dense no-pe tag-btn mdui-m-l-1 mdui-m-y-0 "+t.color.selected},[t._v(t._s(t.detail.job))]),a("button",{class:"mdui-btn mdui-btn-dense no-pe tag-btn mdui-m-y-0 "+t.color[t.detail.star]},[t._v(t._s(t.detail.star)+"★")])]),a("div",{staticClass:"mdui-card-header-subtitle"},[t._v(t._s(t.detail.memo))]),a("div",{staticClass:"detail-tags"},t._l(t.detail.tags,function(e){return a("button",{key:"detail-"+e,class:"mdui-btn mdui-btn-dense no-pe tag-btn "+(t.selected.tag[e]?t.color.selected:t.color.notSelected)},[t._v(t._s(e))])}),0)]),a("div",{staticClass:"mdui-dialog-actions"},[a("a",{staticClass:"mdui-btn mdui-ripple mdui-color-teal",attrs:{href:"http://wiki.joyme.com/arknights/"+t.detail.name,target:"_blank"}},[t._v("在 Wiki 查看")]),a("button",{staticClass:"mdui-btn mdui-ripple mdui-color-pink",attrs:{"mdui-dialog-close":""}},[t._v("关闭")])])]),t.$root.smallScreen?a("button",{staticClass:"mdui-fab mdui-fab-fixed mdui-fab-mini mdui-color-pink-accent mdui-ripple",staticStyle:{"z-index":"10000"},on:{click:function(e){!t.drawer&&(t.drawer=new t.$root.Mdui.Drawer("#drawer")),t.drawer.toggle()}}},[a("i",{staticClass:"mdui-icon material-icons"},[t._v("sort")])]):t._e()]:a("mdui-progress")],2)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"mdui-chip-icon mdui-color-red"},[a("i",{staticClass:"mdui-icon material-icons"},[t._v("priority_high")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticClass:"mdui-table-col-numeric",attrs:{width:"1"}},[t._v("#")]),a("th",{attrs:{width:"20%"}},[t._v("词条")]),a("th",{staticClass:"mdui-text-center",attrs:{width:"1"}},[t._v("可保底")]),a("th",{attrs:{width:"80%"}},[t._v("可能出现（点击干员查看详细信息）")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("词条")]),a("th",[t._v("可能出现（点击干员查看详情）")])])])}],n=a("3835"),r=a("1da1"),l=(a("55dd"),a("ac6a"),a("3b4e"),a("2ef0")),o=a.n(l);let c=[];var d={name:"arkn-hr",data:()=>({l:o.a,ready:!1,showAll:!1,hr:[],addition:{},tags:{"资深干员":[],"高级资深干员":[]},selected:{star:o.a.fill(Array(6),!0),tag:{}},setting:{showAvatar:!1,hide12:!1,hideSingleFemale:!1},settingZh:{showAvatar:"显示头像",hide12:"隐藏1★2★",hideSingleFemale:"隐藏单独的“女性干员”词条"},avgCharTag:0,tagList:{sex:["男性干员","女性干员"],location:["近战位","远程位"],credentials:["新手","资深干员","高级资深干员"],job:["先锋干员","狙击干员","医疗干员","术师干员","近卫干员","重装干员","辅助干员","特种干员"],features:new Set,sort:[{zh:"资质",en:"credentials"},{zh:"位置",en:"location"},{zh:"性别",en:"sex"},{zh:"职业",en:"job"},{zh:"特性",en:"features"}]},color:{notSelected:"mdui-color-brown-300",selected:"mdui-color-grey-800",6:"mdui-color-red-700",5:"mdui-color-orange-900",4:"mdui-color-cyan-700",3:"mdui-color-green-700",2:"mdui-color-brown-700",1:"mdui-color-grey-700"},detail:0,drawer:!1}),watch:{"selected.tag":{handler(){o.a.filter(["高级资深干员","资深干员","爆发","控场","召唤"],t=>this.selected.tag[t]).length>0?this.$root.nm=!0:this.$root.nm=!1;let t=o.a.flatMap(this.selected.tag,(t,e)=>t?[e]:[]);if(t.length>6){new this.$root.Mdui.alert("最多只能同时选择 6 个词条噢！",null,null,{confirmText:"好吧",history:!1});for(let t in this.selected.tag)this.selected.tag[t]=c.includes(t);t=c}else c=t},deep:!0},setting:{handler(t){localStorage.setItem("hr.setting",JSON.stringify(t))},deep:!0}},computed:{allStar(){return o.a.sum(this.selected.star)==this.selected.star.length},combinations(){let t=o.a.flatMap(this.selected.tag,(t,e)=>t?[e]:[]),e=o.a.flatMap(this.selected.star,(t,e)=>t?[e+1]:[]),a=o.a.flatMap([1,2,3],e=>o.a.combinations(t,e)),s=[];for(let i of a){if(this.setting.hideSingleFemale&&1==i.length&&"女性干员"==i[0])continue;let t=[];for(let e of i)t.push(this.tags[e]);let a=o.a.intersection(...t);if(i.includes("高级资深干员")||o.a.remove(a,t=>6==this.hr[t].star),0==a.length)continue;let n=o.a.filter(a,t=>this.hr[t].star>=3);0==n.length&&(n=a);let r=o.a.sumBy(n,t=>this.hr[t].star)/n.length-i.length/10-n.length/this.avgCharTag,l=o.a.minBy(n,t=>this.hr[t].star);o.a.remove(a,t=>!e.includes(this.hr[t].star)),this.setting.hide12&&o.a.remove(a,t=>this.hr[t].star<3),0!=a.length&&s.push({tags:i,chars:a,min:this.hr[l].star,score:r})}return s.sort((t,e)=>t.min==e.min?e.score-t.score:e.min-t.min),s}},methods:{reset(){this.selected.star=o.a.fill(Array(this.selected.star.length),!0);for(let t in this.selected.tag)this.selected.tag[t]=!1},showDetail(t){this.detail=this.hr[t],this.$nextTick(()=>new this.$root.Mdui.Dialog("#detail",{history:!1}).open())}},created:function(){var t=Object(r["a"])(function*(){var t=yield Promise.all([this.$root.getData("addition"),this.$root.getData("hr")]),e=Object(n["a"])(t,2);this.addition=e[0],this.hr=e[1],this.hr.sort((t,e)=>e.star-t.star);let a=0;const s=this.tagList.location.concat(this.tagList.credentials);this.hr.forEach((t,e)=>{let i=t.pub,n=t.sex,r=t.tags,l=t.job,o=t.star;if(i){for(let t of r)s.includes(t)||this.tagList.features.add(t);switch(o){case 5:this.tags["资深干员"].push(e);break;case 6:this.tags["高级资深干员"].push(e);break}r.push(`${n}性干员`),r.push(`${l}干员`);for(let t of r)this.tags[t]||(this.tags[t]=[]),this.tags[t].push(e);a+=r.length}});let i=o.a.size(this.tags);this.avgCharTag=a/i,this.tagList.features=Array.from(this.tagList.features).sort((t,e)=>{return t.length==e.length?t.localeCompare(e):t.length-e.length});for(let n in this.tags)this.$set(this.selected.tag,n,!1);let r=localStorage.getItem("hr.setting");r&&(this.setting=JSON.parse(r)),this.ready=!0});function e(){return t.apply(this,arguments)}return e}(),destroyed(){this.$root.nm=!1}},u=d,h=(a("77a5"),a("2877")),m=Object(h["a"])(u,s,i,!1,null,null,null);e["default"]=m.exports},"1da1":function(t,e,a){"use strict";function s(t,e,a,s,i,n,r){try{var l=t[n](r),o=l.value}catch(c){return void a(c)}l.done?e(o):Promise.resolve(o).then(s,i)}function i(t){return function(){var e=this,a=arguments;return new Promise(function(i,n){var r=t.apply(e,a);function l(t){s(r,i,n,l,o,"next",t)}function o(t){s(r,i,n,l,o,"throw",t)}l(void 0)})}}a.d(e,"a",function(){return i})},"2f21":function(t,e,a){"use strict";var s=a("79e5");t.exports=function(t,e){return!!t&&s(function(){e?t.call(null,function(){},1):t.call(null)})}},3835:function(t,e,a){"use strict";function s(t){if(Array.isArray(t))return t}function i(t,e){var a=[],s=!0,i=!1,n=void 0;try{for(var r,l=t[Symbol.iterator]();!(s=(r=l.next()).done);s=!0)if(a.push(r.value),e&&a.length===e)break}catch(o){i=!0,n=o}finally{try{s||null==l["return"]||l["return"]()}finally{if(i)throw n}}return a}function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function r(t,e){return s(t)||i(t,e)||n()}a.d(e,"a",function(){return r})},"3b4e":function(t,e,a){(function(t,e){e(a("2ef0"))})(0,function(t){"use strict";function e(t){var e=function(){for(var a=[],s=arguments.length;s--;)a[s]=arguments[s];return t.call.apply(t,[this,e].concat(a))};return e}t=t&&t.hasOwnProperty("default")?t["default"]:t,t.mixin({combinations:function(a,s){a=t.values(a);var i=[];return e(function(e,n,r){n.length<s?t.find(a,function(a,s){e(t.concat(n,[a]),s+1)},r):i.push(n)})([],0),i}})})},"3b81":function(t,e,a){},"55dd":function(t,e,a){"use strict";var s=a("5ca1"),i=a("d8e8"),n=a("4bf8"),r=a("79e5"),l=[].sort,o=[1,2,3];s(s.P+s.F*(r(function(){o.sort(void 0)})||!r(function(){o.sort(null)})||!a("2f21")(l)),"Array",{sort:function(t){return void 0===t?l.call(n(this)):l.call(n(this),i(t))}})},"77a5":function(t,e,a){"use strict";var s=a("3b81"),i=a.n(s);i.a}}]);